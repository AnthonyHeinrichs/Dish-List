<div class="resto-card">

  <% if restaurant.photos.attached? %>
    <%= cl_image_tag restaurant.photos.first.key, class: "dishlist-picture" %>
  <% else %>
    <%= image_tag("restaurant_missing.jpg", class: "dishlist-picture") %>
  <% end %>

  <div class="resto-content">
    <div class="top-content">
      <div class="restaurant-card-title-name"><%= restaurant.name%></div>
      <%= restaurant.address%>
    </div>

    <div class="buttom-content">
      <div class="hours-restaurant">
        <p>HOURS</p>
        <!--Validating if a restaurant is open-->
        <% week = restaurant.openings %>
        <% if week.first.nil? %>
          <p>n/a</p>
        <% else %>
          <% if @timenow >= week[@daynow].start_hour && @timenow <= week[@daynow].end_hour %>
            <p style="color: green; text-align: left;" >Open</p>
          <% else %>
            <p style="color: red; text-align: left;">Closed</p>
          <% end %>
        <% end %>
      </div>


      <div class="restaurant-rating">
        <p>RATING</p>
        <% reviews = @reviews.where(restaurant_id: restaurant) %>
        <% if reviews.present? %>
          <% rating_total = 0 %>
          <% reviews.each do |review| %>
            <% review_rating = (review.authenticity.to_f + review.value.to_f) / 2 %>
            <% rating_total += review_rating %>
          <% end %>
          <div style="text-align: left;"><%= (rating_total / reviews.count).round(1) %></div>
          <% else %>
          <div style="text-align: left;">No Reviews</div>
        <% end %>
      </div>


      <div class="card-distance">
        <p>DISTANCE</p>
        <div style="text-align: left;">
          <% case restaurant.address %>
            <% when 'Berlin' %>
              2 km
            <% when 'Hamburg' %>
              289 Km
            <% when 'Cologne' %>
              432 Km
            <% when 'Munich' %>
              612 Km
            <% when 'Paris' %>
              1,074 Km
            <% else %>
              2 Km
          <% end %>
        </div>
      </div>
    </div>


  </div>
</div>
